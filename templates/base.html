<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}èœœç½åå°{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/all.css') }}">
</head>
<body>
    <!-- ä¸»é¢˜åˆ‡æ¢ï¼šåªä¿ç•™ä¸€ä¸ªæŒ‰é’®ï¼Œæ— åŠ¨ç”» -->
    <div class="theme-toggle">
        <button id="theme-btn" class="btn-icon">ğŸŒ“</button>
    </div>

    <div class="container">
        <div class="sidebar">
            <h2>èœœç½ç®¡ç†</h2>
            <nav>
                <a href="{{ url_for('admin.dashboard') }}" class="nav-item">ä»ªè¡¨ç›˜</a>
                <a href="{{ url_for('admin.attacks') }}" class="nav-item">æ”»å‡»äº‹ä»¶</a>
                <a href="{{ url_for('admin.attackers') }}" class="nav-item">æ”»å‡»è€…ç”»åƒ</a>
                <a href="{{ url_for('admin.stats') }}" class="nav-item">æ•°æ®ç»Ÿè®¡</a>
                <a href="{{ url_for('admin.database') }}" class="nav-item">æ•°æ®åº“</a>
                <a href="{{ url_for('admin.map') }}" class="nav-item">å¯è§†åŒ–åœ°å›¾</a>
            </nav>

            <!-- å›¾å››ï¼šæœ€å·¦ä¸‹è§’æ–‡å­—ã€Œè®¾ç½®ã€+ã€Œé€€å‡ºã€ -->
            <div class="nav-bottom">
                <a href="{{ url_for('admin.settings') }}" class="nav-item">è®¾ç½®</a>
                <a href="{{ url_for('auth.logout') }}" class="nav-item">é€€å‡º</a>
            </div>
        </div>

        <div class="main-content">
            <div class="header">
                <h1>{% block header %}{% endblock %}</h1>
            </div>
            <div class="content">
                {% with messages = get_flashed_messages(with_categories=true) %}
                    {% if messages %}
                        {% for category, message in messages %}
                            <div class="alert alert-{{ category }}">{{ message }}</div>
                        {% endfor %}
                    {% endif %}
                {% endwith %}
                {% block content %}{% endblock %}
            </div>
        </div>
    </div>

    <!-- æç®€ä¸»é¢˜åˆ‡æ¢ï¼ˆæ— åŠ¨ç”»ï¼‰ -->
    <script>
        const btn = document.getElementById('theme-btn');
        const html = document.documentElement;
        btn.addEventListener('click', () => {
            const now = html.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
            html.setAttribute('data-theme', now);
            localStorage.setItem('theme', now);
        });
    </script>
</body>
</html>